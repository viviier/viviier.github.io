<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="javascript," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="å½“ä¸»çº¿ç¨‹çš„execution context stackç©ºäº†ï¼Œå°±ä¼šå»è¯»å–task queueï¼Œå¦‚æœtask queueæœ‰taskï¼Œé‚£ä¹ˆå°±ä¼šé€šè¿‡event loopæŠŠtaskæ¨è¿›heap stackï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šä¸æ–­é‡å¤ã€‚è¿™ä¸ªjavascritçš„äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œå°±å«event looopã€‚ javacriptå•çº¿ç¨‹javascriptæ˜¯å•çº¿ç¨‹çš„ã€‚javascriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ã€æ“ä½œDOMï¼Œä¸º">
<meta name="keywords" content="javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="event-loop">
<meta property="og:url" content="http://yoursite.com/2018/05/03/event-loop/index.html">
<meta property="og:site_name" content="viviier">
<meta property="og:description" content="å½“ä¸»çº¿ç¨‹çš„execution context stackç©ºäº†ï¼Œå°±ä¼šå»è¯»å–task queueï¼Œå¦‚æœtask queueæœ‰taskï¼Œé‚£ä¹ˆå°±ä¼šé€šè¿‡event loopæŠŠtaskæ¨è¿›heap stackï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šä¸æ–­é‡å¤ã€‚è¿™ä¸ªjavascritçš„äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œå°±å«event looopã€‚ javacriptå•çº¿ç¨‹javascriptæ˜¯å•çº¿ç¨‹çš„ã€‚javascriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ã€æ“ä½œDOMï¼Œä¸º">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/event%20loop.png">
<meta property="og:image" content="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022301.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2014100803.png">
<meta property="og:image" content="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022304.png">
<meta property="og:image" content="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022303.png">
<meta property="og:image" content="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022302.png">
<meta property="og:image" content="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022303.png">
<meta property="og:image" content="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022305.jpg">
<meta property="og:updated_time" content="2018-05-02T18:20:23.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="event-loop">
<meta name="twitter:description" content="å½“ä¸»çº¿ç¨‹çš„execution context stackç©ºäº†ï¼Œå°±ä¼šå»è¯»å–task queueï¼Œå¦‚æœtask queueæœ‰taskï¼Œé‚£ä¹ˆå°±ä¼šé€šè¿‡event loopæŠŠtaskæ¨è¿›heap stackï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šä¸æ–­é‡å¤ã€‚è¿™ä¸ªjavascritçš„äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œå°±å«event looopã€‚ javacriptå•çº¿ç¨‹javascriptæ˜¯å•çº¿ç¨‹çš„ã€‚javascriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ã€æ“ä½œDOMï¼Œä¸º">
<meta name="twitter:image" content="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/event%20loop.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/05/03/event-loop/"/>





  <title> event-loop | viviier </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">viviier</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/03/event-loop/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="viviier">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://okuesjok0.bkt.clouddn.com/109951162857314804.jpeg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="viviier">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="viviier" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                event-loop
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-03T02:18:52+08:00">
                2018-05-03
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>å½“ä¸»çº¿ç¨‹çš„execution context stackç©ºäº†ï¼Œå°±ä¼šå»è¯»å–task queueï¼Œå¦‚æœtask queueæœ‰taskï¼Œé‚£ä¹ˆå°±ä¼šé€šè¿‡event loopæŠŠtaskæ¨è¿›heap stackï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šä¸æ–­é‡å¤ã€‚è¿™ä¸ªjavascritçš„äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œå°±å«event looopã€‚</p>
<h3 id="javacriptå•çº¿ç¨‹"><a href="#javacriptå•çº¿ç¨‹" class="headerlink" title="javacriptå•çº¿ç¨‹"></a>javacriptå•çº¿ç¨‹</h3><p>javascriptæ˜¯å•çº¿ç¨‹çš„ã€‚javascriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ã€æ“ä½œDOMï¼Œä¸ºäº†é¿å…å¤æ‚æ€§å’Œä¸€äº›ä¸å¿…è¦çš„é—®é¢˜ï¼Œæ‰€ä»¥æ˜¯ä»ä¸€è¯ç”Ÿï¼Œjavascriptå°±æ˜¯å•çº¿ç¨‹ã€‚å¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆä¸€ä¸ªçº¿ç¨‹åœ¨æŸä¸ªDOMä¸Šæ·»åŠ å†…å®¹ï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹åˆ æ‰äº†è¿™ä¸ªDOMï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¸çŸ¥é“ä»¥å“ªä¸ªçº¿ç¨‹ä¸ºå‡†äº†ã€‚</p>
<h3 id="åŒæ­¥å’Œå¼‚æ­¥"><a href="#åŒæ­¥å’Œå¼‚æ­¥" class="headerlink" title="åŒæ­¥å’Œå¼‚æ­¥"></a>åŒæ­¥å’Œå¼‚æ­¥</h3><p>åŒæ­¥ä»»åŠ¡æ˜¯æŒ‡åœ¨ä¸»çº¿ç¨‹çš„execution context stackæ‰§è¡Œçš„taskï¼Œæ’é˜Ÿæ‰§è¡Œï¼Œåªæœ‰å½“å‰ä¸€ä¸ªtaskæ‰§è¡Œå®Œæ¯•ï¼Œæ‰èƒ½æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ã€‚å¼‚æ­¥ä»»åŠ¡æ˜¯æŒ‡åœ¨task queueé‡Œçš„ä»»åŠ¡ï¼Œå½“execution context stackç©ºæ—¶ï¼Œä¼šé€šè¿‡event loopæŠŠtask queueçš„ä»»åŠ¡pushåˆ°execution context stackã€‚<br>è€Œå¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœåï¼Œä¸€èˆ¬ä¼šè¢«pushåˆ°task queueï¼Œä¸€æ—¦ecsï¼ˆexecution context stackï¼‰ä¸­çš„æ‰€æœ‰çš„taskæ‰§è¡Œå®Œæ¯•ï¼Œsystemå°±ä¼šé€šè¿‡event loopè¯»å–task queueï¼Œç„¶åæŠŠtaskæ”¾å…¥ecså¼€å§‹æ‰§è¡Œã€‚</p>
<h4 id="task-ququeé‡Œæœ‰ä»€ä¹ˆ"><a href="#task-ququeé‡Œæœ‰ä»€ä¹ˆ" class="headerlink" title="task ququeé‡Œæœ‰ä»€ä¹ˆ"></a>task ququeé‡Œæœ‰ä»€ä¹ˆ</h4><p>task queueä¸€èˆ¬ç”¨æ¥å­˜æ”¾timersã€i/oã€callbackï¼ˆåŒ…å«eventlistenerï¼‰ã€‚è¿™é‡Œä»…æŒ‡javascriptï¼Œnodeçš„task queueåœ¨åé¢ã€‚</p>
<h3 id="å…³äºevent-loop"><a href="#å…³äºevent-loop" class="headerlink" title="å…³äºevent loop"></a>å…³äºevent loop</h3><p>ä¸»çº¿ç¨‹ä»â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­è¯»å–äº‹ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªçš„è¿™ç§è¿è¡Œæœºåˆ¶åˆç§°ä¸ºEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚</p>
<p><img src="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/event%20loop.png" alt="event-loop"></p>
<h4 id="browser-javascriptä¸­çš„event-loop"><a href="#browser-javascriptä¸­çš„event-loop" class="headerlink" title="browser javascriptä¸­çš„event loop"></a>browser javascriptä¸­çš„event loop</h4><p>browser javascriptä¸­çš„event loopä¸€èˆ¬ç”¨æ¥è§¦å‘callbackã€ajaxã€timersç­‰ç­‰å¼‚æ­¥ä»»åŠ¡ï¼Œè€Œtimersä¸­ä¸»è¦æ˜¯setTimeoutã€‚setTimeoutä¼šæŠŠäº‹ä»¶æ·»åŠ åˆ°task ququeçš„å°¾éƒ¨ï¼Œè¦ç­‰åˆ°ecså’Œtqï¼ˆtask queueï¼‰ç°æœ‰çš„äº‹ä»¶éƒ½å¤„ç†å®Œæ‰ä¼šæ‰§è¡Œã€‚setTimeout(fn, 0)å¯ä»¥æŒ‡å®šæŸä¸ªä»»åŠ¡åœ¨ecsä¸ºç©ºåç«‹å³æ‰§è¡ŒæŒ‡å®šçš„callbackã€‚</p>
<h3 id="Node-jsçš„Event-loop"><a href="#Node-jsçš„Event-loop" class="headerlink" title="Node.jsçš„Event loop"></a>Node.jsçš„Event loop</h3><h4 id="å…³äºNode-jså¦‚ä½•è§£æjsä»£ç "><a href="#å…³äºNode-jså¦‚ä½•è§£æjsä»£ç " class="headerlink" title="å…³äºNode.jså¦‚ä½•è§£æjsä»£ç "></a>å…³äºNode.jså¦‚ä½•è§£æjsä»£ç </h4><p><img src="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022301.jpg" alt="nodejs-event-loop-a"></p>
<p>é¦–å…ˆé€šè¿‡ç”¨æˆ·é”®å…¥nodeçš„javascriptä»£ç ï¼Œç„¶åv8å¼€å§‹è§£æï¼ˆæ˜¯å¦è§£æä¸ºc++ä»£ç ï¼Ÿï¼‰ï¼Œè§£æä¹‹åè°ƒç”¨nodeçš„apiè¿”å›æ‰§è¡Œç»“æœç»™v8ï¼Œv8å†å°†ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚</p>
<h4 id="Nodeçš„event-loop"><a href="#Nodeçš„event-loop" class="headerlink" title="Nodeçš„event loop"></a>Nodeçš„event loop</h4><p><img src="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2014100803.png" alt="nodejs-event-loop-b"></p>
<p>v8åœ¨è§£æçš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ª<code>libuv</code>åº“è´Ÿè´£node apiçš„æ‰§è¡Œã€‚å®ƒå°†ä¸åŒçš„taskåˆ†é…ç»™ç›¸å¯¹åº”çš„å·¥ä½œæµï¼ˆevent queue || worker threads || â€¦ï¼‰ï¼Œå½¢æˆä¸€ä¸ªevent loopï¼Œä»¥å¼‚æ­¥çš„æ–¹å¼å°†ä»»åŠ¡çš„æ‰§è¡Œç»“æœè¿”è¿˜ç»™v8å¼•æ“ã€‚</p>
<h5 id="å®šæ—¶å™¨"><a href="#å®šæ—¶å™¨" class="headerlink" title="å®šæ—¶å™¨"></a>å®šæ—¶å™¨</h5><p>nodeåœ¨è¯­è¨€æ ‡å‡†ä¸Šæ–°å¢äº†ä¸¤ä¸ªâ€™å®šæ—¶å™¨â€™ï¼Œ<code>process.nexttick</code> å’Œ <code>setImmediate</code>ã€‚</p>
<blockquote>
<p>å°æµ‹è¯•</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// test.js</span></div><div class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">1</span>));</div><div class="line">setImmediate(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">2</span>));</div><div class="line">process.nextTick(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">3</span>));</div><div class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">4</span>));</div><div class="line"><span class="function">(<span class="params">(</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="number">5</span>))();</div></pre></td></tr></table></figure>
<p><code>process.nexttick</code> æ˜¯å°†äº‹ä»¶æ”¾å…¥<code>æœ¬è½®å¾ªç¯</code>çš„<code>nextTickQueue</code>ä¸­<br><code>setImmediate</code> æ˜¯å°†äº‹ä»¶æ”¾å…¥<code>æ¬¡è½®å¾ªç¯</code>çš„task queueé˜Ÿå°¾<br>ä¸¤ä¸ªæœ€å¤§çš„ä¸åŒæ˜¯ï¼Œ<code>process.nexttick</code>æ— è®ºæœ‰å¤šå°‘ä¸ªéƒ½æ˜¯å°†äº‹ä»¶æ”¾å…¥<code>æœ¬è½®å¾ªç¯</code>é€šè¿‡å½“å‰event loopä¸€æ¬¡æ‰§è¡Œå®Œï¼Œè€Œå¤šä¸ªsetImmediateåˆ™éœ€è¦å¤šæ¬¡loopæ‰èƒ½æ‰§è¡Œå®Œã€‚æ‰€ä»¥å‰è€…è¦æ¯”åè€…å‘ç”Ÿçš„æ—©ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿé«˜ï¼ˆä¸ç”¨æ£€æŸ¥task queueï¼‰ã€‚<br>butï¼Œå¦‚æœåƒè¿™æ ·ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">process.nextTick(<span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  process.nextTick(foo);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>é‚£ä¹ˆexecution context stackæ ¹æœ¬ä¸ä¼šå»è¯»å–task queueï¼Œå› ä¸ºä»–ä¸€ç›´åœ¨é‡å¤è¯»å–å½“å‰çš„<code>nextTickQueue</code>ï¼Œé€’å½’çš„process.nexttickï¼ŒNode.jsä¼šè­¦å‘Šä½ æ”¹æˆsetImmediateã€‚</p>
<h4 id="åŒæ­¥å’Œå¼‚æ­¥-1"><a href="#åŒæ­¥å’Œå¼‚æ­¥-1" class="headerlink" title="åŒæ­¥å’Œå¼‚æ­¥"></a>åŒæ­¥å’Œå¼‚æ­¥</h4><p><img src="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022304.png" alt="nodejs-event-loop-d"></p>
<h4 id="æœ¬è½®å¾ªç¯ã€æ¬¡è½®å¾ªç¯"><a href="#æœ¬è½®å¾ªç¯ã€æ¬¡è½®å¾ªç¯" class="headerlink" title="æœ¬è½®å¾ªç¯ã€æ¬¡è½®å¾ªç¯"></a>æœ¬è½®å¾ªç¯ã€æ¬¡è½®å¾ªç¯</h4><p>åœ¨Nodeä¸­ï¼Œå¼‚æ­¥ä»»åŠ¡åˆ†ä¸¤ç§ã€‚</p>
<ul>
<li>è¿½åŠ åœ¨<code>æœ¬è½®å¾ªç¯</code>çš„å¼‚æ­¥ä»»åŠ¡</li>
<li>è¿½åŠ åœ¨<code>æ¬¡è½®å¾ªç¯</code>çš„å¼‚æ­¥ä»»åŠ¡</li>
</ul>
<p><code>process.nexttick</code> å’Œ <code>Promise</code> çš„å›è°ƒå‡½æ•°ï¼Œè¿½åŠ åœ¨<code>æœ¬è½®å¾ªç¯</code>ï¼Œå³nodeçš„ecsä¸€æ—¦æ‰§è¡Œå®Œæˆï¼Œå°±å¼€å§‹æ‰§è¡Œä»–ä»¬ã€‚</p>
<p><img src="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022303.png" alt="nodejs-event-loop-d"></p>
<p><code>setTimeout</code> ã€ <code>setInterval</code> ã€ <code>setImmediate</code> çš„å›è°ƒå‡½æ•°ï¼Œè¿½åŠ åœ¨<code>æ¬¡è½®å¾ªç¯</code>ã€‚</p>
<blockquote>
<p>æ‰€ä»¥ä¸Šé¢<code>å°æµ‹è¯•</code>ä»£ç æ‰§è¡Œé¡ºåºä¸ºï¼š</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ä¸‹é¢ä¸¤è¡Œï¼Œæ¬¡è½®å¾ªç¯æ‰§è¡Œ</span></div><div class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">1</span>));</div><div class="line">setImmediate(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">2</span>));</div><div class="line"><span class="comment">// ä¸‹é¢ä¸¤è¡Œï¼Œæœ¬è½®å¾ªç¯æ‰§è¡Œ</span></div><div class="line">process.nextTick(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">3</span>));</div><div class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">4</span>));</div><div class="line"><span class="comment">// åŒæ­¥ä»»åŠ¡</span></div><div class="line">(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">5</span>))();</div><div class="line"></div><div class="line"><span class="comment">// ä¹Ÿæ˜¯æ ¹æ®ä»£ç çš„é¡ºåºæ¥çš„</span></div><div class="line"><span class="number">5</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<h4 id="process-nextTickï¼ˆnextTickQueueï¼‰"><a href="#process-nextTickï¼ˆnextTickQueueï¼‰" class="headerlink" title="process.nextTickï¼ˆnextTickQueueï¼‰"></a>process.nextTickï¼ˆnextTickQueueï¼‰</h4><p>nodeæ‰§è¡Œå®Œæ‰€æœ‰çš„åŒæ­¥ä»»åŠ¡ï¼Œæ¥ä¸‹æ¥å°±ä¼šæ‰§è¡Œ<code>process.nextTick</code>é˜Ÿåˆ—ã€‚å¦‚æœä½ å¸Œæœ›å¼‚æ­¥ä»»åŠ¡å°½å¿«çš„æ‰§è¡Œï¼Œå°±ä½¿ç”¨<code>process.nextTick</code>ã€‚</p>
<p><img src="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022302.png" alt="nodejs-event-loop-e"></p>
<h4 id="Promiseï¼ˆmicroTaskQueueï¼‰"><a href="#Promiseï¼ˆmicroTaskQueueï¼‰" class="headerlink" title="Promiseï¼ˆmicroTaskQueueï¼‰"></a>Promiseï¼ˆmicroTaskQueueï¼‰</h4><p>Promiseå¯¹è±¡çš„å›è°ƒå‡½æ•°ï¼Œä¼šè¿›å…¥<code>å¼‚æ­¥ä»»åŠ¡</code>çš„<code>å¾®ä»»åŠ¡ï¼ˆmicroTaskï¼‰</code>é˜Ÿåˆ—ã€‚å¾®ä»»åŠ¡é˜Ÿåˆ—è¿½åŠ åœ¨<code>nextTickQueue</code>åé¢ï¼Œä¹Ÿå±äºæœ¬è½®å¾ªç¯ã€‚</p>
<p><img src="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022303.png" alt="nodejs-event-loop-f"></p>
<p>åªæœ‰å‰ä¸€ä¸ªé˜Ÿåˆ—å…¨éƒ¨æ¸…ç©ºä»¥åï¼Œæ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªé˜Ÿåˆ—ã€‚<br>æ‰€ä»¥<code>æœ¬è½®å¾ªç¯</code>çš„æ‰§è¡Œé¡ºåºå°±æ˜¯ï¼š</p>
<ul>
<li>åŒæ­¥ä»»åŠ¡</li>
<li>process.nextTickï¼ˆnextTickQueueï¼‰</li>
<li>Promiseï¼ˆmicroTaskQueueï¼‰</li>
</ul>
<h4 id="äº‹ä»¶å¾ªç¯çš„æ¦‚å¿µ"><a href="#äº‹ä»¶å¾ªç¯çš„æ¦‚å¿µ" class="headerlink" title="äº‹ä»¶å¾ªç¯çš„æ¦‚å¿µ"></a>äº‹ä»¶å¾ªç¯çš„æ¦‚å¿µ</h4><p>Node.jsåªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œäº‹ä»¶å¾ªç¯æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šå®Œæˆçš„ã€‚</p>
<blockquote>
<p>â€œWhen Node.js starts, it initializes the event loop, processes the provided input script which may make async API calls, schedule timers, or call process.nextTick(), then begins processing the event loop.â€</p>
</blockquote>
<p>Nodeåœ¨å¼€å§‹æ‰§è¡Œè„šæœ¬æ—¶ï¼Œä¼šå…ˆè¿›è¡Œevent loopçš„åˆå§‹åŒ–ï¼Œä½†æ˜¯è¿™æ˜¯event loopè¿˜æ²¡å¼€å§‹ï¼Œä¼šå…ˆå®Œæˆä¸‹é¢çš„äº‹æƒ…ğŸ‘‡ï¼š</p>
<ul>
<li>åŒæ­¥ä»»åŠ¡</li>
<li>å‘èµ·å¼‚æ­¥è¯·æ±‚</li>
<li>è§„åˆ’å®šæ—¶å™¨ç”Ÿæ•ˆæ—¶é—´</li>
<li>æ‰§è¡Œprocess.nextTickç­‰ç­‰</li>
</ul>
<p>ä¸Šé¢çš„è¿™äº›äº‹æƒ…æ‰§è¡Œå®Œäº†ï¼Œevent loopå°±æ­£å¼å¼€å§‹äº†ã€‚</p>
<h5 id="å…­ä¸ªé˜¶æ®µ"><a href="#å…­ä¸ªé˜¶æ®µ" class="headerlink" title="å…­ä¸ªé˜¶æ®µ"></a>å…­ä¸ªé˜¶æ®µ</h5><p>äº‹ä»¶å¾ªç¯ä¼šæ— é™æ¬¡çš„æ‰§è¡Œï¼Œä¸€è½®åˆä¸€è½®ã€‚åªæœ‰å¼‚æ­¥ä»»åŠ¡çš„å›è°ƒå‡½æ•°é˜Ÿåˆ—æ¸…ç©ºäº†ï¼Œæ‰ä¼šåœæ­¢æ‰§è¡Œã€‚æ¯ä¸€è½®çš„äº‹ä»¶å¾ªç¯ï¼Œåˆ†æˆå…­ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>timers</li>
<li>I/O callbacks</li>
<li>idleï¼Œprepare</li>
<li>poll</li>
<li>check</li>
<li>close callbakcs</li>
</ul>
<p>æ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„å›è°ƒå‡½æ•°é˜Ÿåˆ—ã€‚åªæœ‰ä¸€ä¸ªé˜¶æ®µçš„å›è°ƒå‡½æ•°é˜Ÿåˆ—æ¸…ç©ºäº†ï¼Œè¯¥æ‰§è¡Œçš„å›è°ƒå‡½æ•°éƒ½æ‰§è¡Œäº†ï¼Œäº‹ä»¶å¾ªç¯æ‰ä¼šè¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚</p>
<p><img src="https://raw.githubusercontent.com/viviier/study-demo/master/hhhhhexo/event-loop/bg2018022305.jpg" alt="nodejs-event-loop-f"></p>
<h6 id="timers"><a href="#timers" class="headerlink" title="timers"></a>timers</h6><p>å®šæ—¶å™¨é˜¶æ®µï¼Œå¤„ç†<code>setTimeout</code> å’Œ <code>setInterval</code>çš„å›è°ƒå‡½æ•°ã€‚è¿›å…¥è¿™ä¸ªé˜¶æ®µåï¼Œä¸»çº¿ç¨‹ä¼šæ£€æŸ¥ä¸€ä¸‹å½“å‰æ—¶é—´ï¼Œæ˜¯å¦æ»¡è¶³å®šæ—¶å™¨çš„æ¡ä»¶ã€‚å¦‚æœæ»¡è¶³å°±æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¦åˆ™å°±ç¦»å¼€è¿™ä¸ªé˜¶æ®µã€‚</p>
<h6 id="I-O-callbacks"><a href="#I-O-callbacks" class="headerlink" title="I/O callbacks"></a>I/O callbacks</h6><p>é™¤äº†ä»¥ä¸‹æ“ä½œçš„å›è°ƒå‡½æ•°ï¼Œå…¶ä»–çš„å›è°ƒå‡½æ•°éƒ½åœ¨è¿™ä¸ªé˜¶æ®µæ‰§è¡Œã€‚</p>
<ul>
<li>setTimeout()å’ŒsetInterval()çš„å›è°ƒå‡½æ•°</li>
<li>setImmediate()çš„å›è°ƒå‡½æ•°</li>
<li>ç”¨äºå…³é—­è¯·æ±‚çš„å›è°ƒå‡½æ•°ï¼Œæ¯”å¦‚socket.on(â€˜closeâ€™, â€¦)</li>
</ul>
<h6 id="idleï¼Œprepare"><a href="#idleï¼Œprepare" class="headerlink" title="idleï¼Œprepare"></a>idleï¼Œprepare</h6><p>libuvå†…éƒ¨ä½¿ç”¨ã€‚</p>
<h6 id="poll"><a href="#poll" class="headerlink" title="poll"></a>poll</h6><p>è½®è¯¢æ—¶é—´ã€‚ç”¨äºç­‰å¾…è¿˜æœªè¿”å›çš„ I/O äº‹ä»¶ï¼Œæ¯”å¦‚æœåŠ¡å™¨çš„å›åº”ã€ç”¨æˆ·ç§»åŠ¨é¼ æ ‡ç­‰ç­‰ã€‚</p>
<p>è¿™ä¸ªé˜¶æ®µçš„æ—¶é—´ä¼šæ¯”è¾ƒé•¿ã€‚å¦‚æœæ²¡æœ‰å…¶ä»–å¼‚æ­¥ä»»åŠ¡è¦å¤„ç†ï¼ˆæ¯”å¦‚åˆ°æœŸçš„å®šæ—¶å™¨ï¼‰ï¼Œä¼šä¸€ç›´åœç•™åœ¨è¿™ä¸ªé˜¶æ®µï¼Œç­‰å¾… I/O è¯·æ±‚è¿”å›ç»“æœã€‚</p>
<h6 id="check"><a href="#check" class="headerlink" title="check"></a>check</h6><p>æ‰§è¡Œ<code>setImmediate</code>çš„å›è°ƒå‡½æ•°ã€‚</p>
<h6 id="close-callbacks"><a href="#close-callbacks" class="headerlink" title="close callbacks"></a>close callbacks</h6><p>æ‰§è¡Œå…³é—­è¯·æ±‚çš„å›è°ƒå‡½æ•°ï¼Œæ¯”å¦‚<code>socket.on(&#39;close&#39;, ...)</code>ã€‚</p>
<p>![nodejs-event-loop-g]</p>
<h3 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h3><p>ç»¼ä¸Šï¼Œäº†è§£äº†event loopå¯ä»¥æé«˜ä½ å¯¹Javascript è¿è¡Œæœºåˆ¶çš„ç†è§£ã€‚javascriptä¸­çš„event loopä¸€èˆ¬ç”¨æ¥è§¦å‘callbackã€ajaxã€timersç­‰ç­‰å¼‚æ­¥ä»»åŠ¡ï¼Œä¸»è¦æ˜¯setTimeout ä»¥åŠå„ç§callbackã€‚nodeçš„event loopåˆ™æ›´ä¸ºå¤æ‚timersã€i/o callbackã€pollâ€¦ã€‚</p>
<h4 id="microtasks-and-macrotasks"><a href="#microtasks-and-macrotasks" class="headerlink" title="microtasks and macrotasks"></a>microtasks and macrotasks</h4><p>examples of microtasks:</p>
<ul>
<li>process.nextTick</li>
<li>promise</li>
<li>object.observe</li>
</ul>
<p>examples of macrotasks:</p>
<ul>
<li>setTimeout</li>
<li>setInterval</li>
<li>setImmediate</li>
<li>I/O</li>
</ul>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li><a href="https://www.youtube.com/watch?v=8aGhZQkoFbQ" target="_blank" rel="noopener">youtubeâ€“Philip Roberts: ä»€ä¹ˆæ˜¯JavaScriptä¸­çš„äº‹ä»¶å¾ªç¯ ï¼ˆEvent Loopï¼‰</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html" target="_blank" rel="noopener">é˜®ä¸€å³°â€“JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆEvent Loop</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/node-event-loop.html" target="_blank" rel="noopener">é˜®ä¸€å³°â€“Node å®šæ—¶å™¨è¯¦è§£</a></li>
<li><a href="https://blog.risingstack.com/node-js-at-scale-understanding-node-js-event-loop/" target="_blank" rel="noopener">Tamas Kadlecsikâ€“Understanding the Node.js Event Loop</a></li>
</ul>

      
    </div>

    <div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">------æœ¬æ–‡ç»“æŸ<i class="fa fa-paw"></i>æ„Ÿè°¢é˜…è¯»------</div>
    
</div>
  
</div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/javascript/" rel="tag"># javascript</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/02/23/æµè§ˆå™¨çš„åŒæºç­–ç•¥å’Œè·¨åŸŸæ–¹æ³•/" rel="next" title="æµè§ˆå™¨çš„åŒæºç­–ç•¥å’Œè·¨åŸŸæ–¹æ³•">
                <i class="fa fa-chevron-left"></i> æµè§ˆå™¨çš„åŒæºç­–ç•¥å’Œè·¨åŸŸæ–¹æ³•
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://okuesjok0.bkt.clouddn.com/109951162857314804.jpeg"
               alt="viviier" />
          <p class="site-author-name" itemprop="name">viviier</p>
          <p class="site-description motion-element" itemprop="description">å—é˜³å¦‚æµ·</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">21</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/viviier" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://viviier.com/demo" target="_blank" title="å®éªŒå®¤">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  å®éªŒå®¤
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#javacriptå•çº¿ç¨‹"><span class="nav-number">1.</span> <span class="nav-text">javacriptå•çº¿ç¨‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åŒæ­¥å’Œå¼‚æ­¥"><span class="nav-number">2.</span> <span class="nav-text">åŒæ­¥å’Œå¼‚æ­¥</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#task-ququeé‡Œæœ‰ä»€ä¹ˆ"><span class="nav-number">2.1.</span> <span class="nav-text">task ququeé‡Œæœ‰ä»€ä¹ˆ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å…³äºevent-loop"><span class="nav-number">3.</span> <span class="nav-text">å…³äºevent loop</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#browser-javascriptä¸­çš„event-loop"><span class="nav-number">3.1.</span> <span class="nav-text">browser javascriptä¸­çš„event loop</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Node-jsçš„Event-loop"><span class="nav-number">4.</span> <span class="nav-text">Node.jsçš„Event loop</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#å…³äºNode-jså¦‚ä½•è§£æjsä»£ç "><span class="nav-number">4.1.</span> <span class="nav-text">å…³äºNode.jså¦‚ä½•è§£æjsä»£ç </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Nodeçš„event-loop"><span class="nav-number">4.2.</span> <span class="nav-text">Nodeçš„event loop</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#å®šæ—¶å™¨"><span class="nav-number">4.2.1.</span> <span class="nav-text">å®šæ—¶å™¨</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åŒæ­¥å’Œå¼‚æ­¥-1"><span class="nav-number">4.3.</span> <span class="nav-text">åŒæ­¥å’Œå¼‚æ­¥</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æœ¬è½®å¾ªç¯ã€æ¬¡è½®å¾ªç¯"><span class="nav-number">4.4.</span> <span class="nav-text">æœ¬è½®å¾ªç¯ã€æ¬¡è½®å¾ªç¯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#process-nextTickï¼ˆnextTickQueueï¼‰"><span class="nav-number">4.5.</span> <span class="nav-text">process.nextTickï¼ˆnextTickQueueï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Promiseï¼ˆmicroTaskQueueï¼‰"><span class="nav-number">4.6.</span> <span class="nav-text">Promiseï¼ˆmicroTaskQueueï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#äº‹ä»¶å¾ªç¯çš„æ¦‚å¿µ"><span class="nav-number">4.7.</span> <span class="nav-text">äº‹ä»¶å¾ªç¯çš„æ¦‚å¿µ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#å…­ä¸ªé˜¶æ®µ"><span class="nav-number">4.7.1.</span> <span class="nav-text">å…­ä¸ªé˜¶æ®µ</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#timers"><span class="nav-number">4.7.1.1.</span> <span class="nav-text">timers</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#I-O-callbacks"><span class="nav-number">4.7.1.2.</span> <span class="nav-text">I/O callbacks</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#idleï¼Œprepare"><span class="nav-number">4.7.1.3.</span> <span class="nav-text">idleï¼Œprepare</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#poll"><span class="nav-number">4.7.1.4.</span> <span class="nav-text">poll</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#check"><span class="nav-number">4.7.1.5.</span> <span class="nav-text">check</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#close-callbacks"><span class="nav-number">4.7.1.6.</span> <span class="nav-text">close callbacks</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å†™åœ¨æœ€å"><span class="nav-number">5.</span> <span class="nav-text">å†™åœ¨æœ€å</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#microtasks-and-macrotasks"><span class="nav-number">5.1.</span> <span class="nav-text">microtasks and macrotasks</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å‚è€ƒé“¾æ¥"><span class="nav-number">6.</span> <span class="nav-text">å‚è€ƒé“¾æ¥</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">viviier</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	




  
  

  

  

  

  


  <!-- èƒŒæ™¯åŠ¨ç”» -->
<script type="text/javascript" src="/js/src/particle.js"></script>

</body>
</html>
